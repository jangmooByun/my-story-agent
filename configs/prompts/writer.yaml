# ==============================================
# Writer Agent 프롬프트
# ==============================================

# 시스템 프롬프트
system: |
  당신은 Neo4j 그래프 데이터베이스 전문가입니다. 분석된 개념과 관계를 Neo4j 호환 형식으로 변환합니다.

  ## 역할
  - Cypher 쿼리 생성
  - CSV 데이터 포맷팅
  - 마크다운 문서 생성

  ## Neo4j 노드 레이블
  - Thought: 개별 생각/문서
  - Concept: 추출된 개념
  - Category: 카테고리
  - Date: 날짜

  ## 출력 형식
  요청된 형식에 맞게 정확히 출력하세요.

# Cypher 생성 프롬프트
cypher_generation: |
  다음 데이터를 Neo4j Cypher 쿼리로 변환해주세요.

  ## 입력 데이터
  {data}

  ## 스키마 정보
  노드:
  - (t:Thought {{id, title, content, created_at}})
  - (c:Concept {{id, name, type}})
  - (cat:Category {{id, name}})
  - (d:Date {{id, date, year, month, day}})

  관계:
  - (t)-[:CONTAINS]->(c)
  - (t)-[:BELONGS_TO]->(cat)
  - (t)-[:CREATED_ON]->(d)
  - (c)-[:RELATED_TO {{strength, description}}]->(c)

  ## 요구사항
  - MERGE 사용 (중복 방지)
  - 속성은 camelCase
  - 한글 내용 그대로 유지

  ## 응답 형식
  ```cypher
  // 노드 생성
  MERGE (t:Thought {{id: "..."}})
  SET t.title = "...", t.content = "..."

  // 관계 생성
  MATCH (a:Concept {{id: "..."}}), (b:Concept {{id: "..."}})
  MERGE (a)-[:RELATED_TO {{strength: 0.8}}]->(b)
  ```

# CSV 생성 프롬프트
csv_generation: |
  다음 데이터를 Neo4j Import용 CSV 형식으로 변환해주세요.

  ## 입력 데이터
  {data}

  ## 필요한 CSV 파일들

  ### nodes_thoughts.csv
  ```
  id:ID,title,content,created_at,:LABEL
  ```

  ### nodes_concepts.csv
  ```
  id:ID,name,type,:LABEL
  ```

  ### relationships.csv
  ```
  :START_ID,:END_ID,:TYPE,strength:float,description
  ```

  ## 응답 형식 (JSON)
  ```json
  {{
    "nodes_thoughts": "CSV 내용",
    "nodes_concepts": "CSV 내용",
    "nodes_categories": "CSV 내용",
    "relationships": "CSV 내용"
  }}
  ```

# 마크다운 생성 프롬프트
markdown_generation: |
  다음 분석 결과를 마크다운 문서로 변환해주세요.

  ## 입력 데이터
  {data}

  ## 문서 구조
  1. 개요 (요약)
  2. 추출된 개념 목록
  3. 관계 다이어그램 (Mermaid)
  4. 카테고리별 분류
  5. 메타데이터

  ## Mermaid 다이어그램 형식
  ```mermaid
  graph LR
    A[개념A] -->|관계| B[개념B]
  ```

  ## 응답
  완성된 마크다운 문서를 출력하세요.

# 요약 보고서 프롬프트
summary_report: |
  다음 분석 결과를 바탕으로 요약 보고서를 작성해주세요.

  ## 분석 데이터
  {data}

  ## 보고서 구조
  1. **총괄 요약**: 분석된 문서 수, 추출된 개념 수, 발견된 관계 수
  2. **핵심 인사이트**: 가장 중요한 발견 3-5개
  3. **주요 개념 클러스터**: 의미적으로 연결된 개념 그룹
  4. **권장 사항**: 추가 분석이나 정리가 필요한 영역

  ## 응답 형식 (마크다운)

# 검증 프롬프트
validation: |
  다음 Cypher 쿼리/데이터의 유효성을 검증해주세요.

  ## 검증 대상
  {content}

  ## 검증 항목
  - 문법 오류
  - 스키마 일관성
  - 데이터 무결성 (필수 필드, 타입)
  - 중복 가능성

  ## 응답 형식 (JSON)
  ```json
  {{
    "is_valid": true|false,
    "errors": ["오류1", "오류2"],
    "warnings": ["경고1"],
    "suggestions": ["개선 제안"]
  }}
  ```
